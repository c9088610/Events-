<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      async function addEvent() {
          const title = document.getElementById('addTitle').value;
          const date = document.getElementById('addDate').value;
          await fetch('your-api-url/events', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ title, date }),
          });
          loadEvents();
      }

      async function deleteEvent() {
          const eventId = document.getElementById('eventListDelete').value;
          await fetch(`your-api-url/events/${eventId}`, {
              method: 'DELETE',
          });
          loadEvents();
      }

      async function updateEvent() {
          const eventId = document.getElementById('eventListUpdate').value;
          const title = document.getElementById('updateTitle').value;
          const date = document.getElementById('updateDate').value;
          await fetch(`your-api-url/events/${eventId}`, {
              method: 'PUT',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ title, date }),
          });
          loadEvents();
      }

      async function loadEvents() {
          const response = await fetch('your-api-url/events');
          const events = await response.json();
          const deleteList = document.getElementById('eventListDelete');
          const updateList = document.getElementById('eventListUpdate');
          deleteList.innerHTML = '';
          updateList.innerHTML = '';
          events.forEach(event => {
              const optionDelete = document.createElement('option');
              optionDelete.value = event.id;
              optionDelete.textContent = event.title;
              deleteList.appendChild(optionDelete);

              const optionUpdate = document.createElement('option');
              optionUpdate.value = event.id;
              optionUpdate.textContent = event.title;
              updateList.appendChild(optionUpdate);
          });
      }

      window.onload = loadEvents;
  </script>


</head>
<body>
  <h1>Event Management</h1>

  <h2>Add Event</h2>
  <input type="text" id="addTitle" placeholder="Event Title" required>
  <input type="date" id="addDate" required>
  <button onclick="addEvent()">Add</button>

  <h2>Delete Event</h2>
  <select id="eventListDelete"></select>
  <button onclick="deleteEvent()">Delete</button>

  <h2>Update Event</h2>
  <select id="eventListUpdate" onchange="fillUpdateForm()"></select>
  <input type="text" id="updateTitle" placeholder="Event Title" required>
  <input type="date" id="updateDate" required>
  <button onclick="updateEvent()">Update</button>

  <script>
      function fillUpdateForm() {
          const eventId = document.getElementById('eventListUpdate').value;
          const title = document.querySelector(`#eventListUpdate option[value='${eventId}']`).text;
          document.getElementById('updateTitle').value = title;
          // Assuming you might want to handle date retrieval here as well.
      }
  </script>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
          axios.get("https://localhost:7287/api/Events").then((res) => {
            var calendarEl = document.getElementById("calendar");
            var calendar = new FullCalendar.Calendar(calendarEl, {
              initialView: "dayGridMonth",
              events: res.data,
            });
            calendar.render();
          });
        });
    </script>
    <div id="calendar"></div>

   

</body>
</html>